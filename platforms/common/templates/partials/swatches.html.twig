<ul class="g-grid">
    {% set base = config.styles.base %}
    {% set stopValue = config.styles.stop %}
    {% set stop = (100 / config.styles.stop|default(1))|number_format(3, '.') %}
    {% for key, swatch in swatches %}
        {% set counter = 0 %}
        <li class="g-block">
            <a href="#" class="swatch" data-styles="{{ key }}">
                <img src="{{ base ~ swatch.image }}" class="swatch-image" />
                <span class="swatch-colors"
                        {# required attribute structures #}
                        style="background: linear-gradient(to right
                            {% for color in swatch.colors|slice(0, stop) -%}
                                ,{{- color }} {{ counter -}}%, {{- color }} {{ counter + stop -}}%
                                {% set counter = counter + stop %}
                            {%- endfor %})">
                </span>
            </a>
        </li>
    {% endfor %}
 </ul>
